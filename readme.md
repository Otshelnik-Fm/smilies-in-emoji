## Описание:  

Дополнение для WordPress плагина [WP-Recall](https://wordpress.org/plugins/wp-recall/) - и входящего в его комплект дополнения Rcl Chat (Чат)  

Простое дополнение, которое превратит смайлы вордпресс в эмодзи. Данное дополнение год работало на моем сайте - теперь и вам пора его попробовать.  

### Возможности:  

- Расширенный список эмодзи - 117 шт  
- Поддержка дополнения PrimeForum  
- Поддержка комментариев  
- Поддержка дополнения RclChat: личные сообщения, миничат, глобальный чат и все чаты на основе этого дополнения (floatChat, freelance и т.п.)  
- Возможность добавить/изменить список эмодзи через доступный фильтр небольшим кодом  

Дополнение работает для залогиненного пользователя.  

Дополнение использует стандартную js-библиотеку вордпресс от твиттера. Поэтому у вас этот скрипт не должен быть отключен. Подробности в секции FAQ  

p.s. как изменять и дополнять своими эмодзи найдете в руководстве тут: ["Подстраиваем дополнение Smilies in Emoji под себя"](https://codeseller.ru/post-group/podstraivaem-dopolnenie-smilies-in-emoji-pod-sebya/)  

------------------------------


## Demo:  

Демонстрация работы на моем сайте в чате или одиночной записи в комментариях [здесь](https://otshelnik-fm.ru/post-group/116/?utm_source=free-addons&utm_medium=github&utm_campaign=smilies-in-emoji&utm_content=github-com&utm_term=page-post-116) - вы должны войти на сайт чтобы увидеть их.  

------------------------------

## Установка/Обновление  

**Установка:**  
Т.к. это дополнение для WordPress плагина WP-Recall, то оно устанавливается через [менеджер дополнений WP-Recall](https://codeseller.ru/obshhie-svedeniya-o-dopolneniyax-wp-recall/)  

1. В админке вашего сайта перейдите на страницу "WP-Recall" -> "Дополнения" и в самом верху нажмите на кнопку "Обзор", выберите .zip архив дополнения на вашем пк и нажмите кнопку "Установить".  
2. В списке загруженных дополнений, на этой странице, найдите это дополнение, наведите на него курсор мыши и нажмите кнопку "Активировать". Или выберите чекбокс и в выпадающем списке действия выберите "Активировать". Нажмите применить.  


**Обновление:**  
Дополнение поддерживает [автоматическое обновление](https://codeseller.ru/avtomaticheskie-obnovleniya-dopolnenij-plagina-wp-recall/) - два раза в день отправляются вашим сервером запросы на обновление.  
Если в течении суток вы не видите обновления (а на странице дополнения вы видите что версия вышла новая), советую ознакомиться с этой [статьёй](https://codeseller.ru/post-group/rabota-wordpress-krona-cron-prinuditelnoe-vypolnenie-kron-zadach-dlya-wp-recall/) 

------------------------------


## FAQ:  
**1. Могу добавить/изменить эмодзи?**  
- да.  

Воспользуйтесь фильтром: <code>apply_filters( 'siem_emoji', $smilies )</code>  
Подробности [здесь](https://codeseller.ru/post-group/podstraivaem-dopolnenie-smilies-in-emoji-pod-sebya/)  


**2. Эмодзи нет, или они не кликабельные. Почему?**  
Убедитесь что с помощью плагина "улучшатора" типа Autoptimize или Clearfy или кодом вы не отключили поддержку эмодзи в самом вордпресс  
Скрипт wp-emoji-release.min.js https://yadi.sk/i/aRy7Q31WsOSviA должен у вас загружаться. Проверьте его загрузку в консоли браузера (F12) вкладка сеть.  
Но этот вопрос не касается работы моего дополнения. Это ваша проблема с вордпресс.  

Также убедитесь чтобы у вас не был включен дублирующий плагин для изменения/добавления смайлов. Такие как Kama smilies или Classic smilies  
очевидно они тоже могут вмешиваться.  


**3. В форме комментария иконка вызова блока эмодзи доступна только залогиненному. Как сделать и для гостя?**  
- в данной реализации никак. Только для залогиненного. Пусть это будет стимулом войти на ваш сайт.  


**4. Иконку вызова блока эмодзи в форме комментариев могу переместить?**  
- Можете. Попробуйте стилями повлиять на нее.  

Также в конце файла index.php есть список хуков - попробуйте один из них вписать в первый аргумент вместо <code>add_action( 'comment_form_logged_in_after'</code>  


**5. Отправляю комментарий с эмодзи, а его нет в опубликованном комментарии. Почему?**  
- Ваша база данных не поддерживает многобайтовую кодировку (mb4). Сделайте бекап базы данных на всякий случай и сделайте так:  
зайдите в таблицу комментариев, структура и измените как на скриншотах:   
https://yadi.sk/i/qHwYQxbl8_sMrg  
https://yadi.sk/i/VwsevGP_UolBEQ   
теперь ваша таблица комментариев поддерживает эмозди.  
Аналогично если другие таблицы у вас не поддерживают эмодзи: чат, записи - конвертируйте их. не забывайте предварительно делать бекап базы.   
Лишний раз лучше перестраховаться перед тем как лезть в базу и править её.  


**6. Эмодзи не вставляются в форму комментария. Почему?**
Не совсем правильна ваша вордпресс тема. Нет нужного id у формы комментария. Почитайте тут как добавить под вашу тему:
https://codeseller.ru/post-group/wp-recall-13-0-veter-peremen-ili-sovsem-ne-strashnaya-versiya/
начиная со слов: 
> "Плагин получил свой функционал для вывода смайлов"

Вам нужно отменить функцию <code>siem_comment_smiles()</code> (remove_action) и написать свою замену со своим id формы комментария.

------------------------------

## Changelog:  
**2019-05-01**  
v1.0  
* в тексте увеличил до 24px svg эмодзи  
* блок эмодзи: расширил его, добавил тень. Все смайлы равномерно в блоке представлены  
* их размер в списке эмодзи увеличил до 26 пикселей. При наведении зум выбранного.  

* поддержка:  
PrimeForum - ок  
RclChat:  
- личные сообщения - ок  
- мини чат лс - ок  
- глобальный чат - ок  
- также любые чаты на его основе (float chat и т.д.) - ок  
Комментариев сайта (могут быть некоторые сложности - читай FAQ)  

* добавлен фильтр: <code>apply_filters( 'siem_emoji', $smilies )</code>  


**2019-05-01**  
v0.1  
* Release  


------------------------------


## Поддержка и контакты:  

* Поддержка осуществляется в рамках текущего функционала дополнения  
* При возникновении проблемы, создайте соотвествующую тему на форуме поддержки товара  
* Если вам нужна доработка под ваши нужды - вы можете обратиться ко мне в [ЛС](https://codeseller.ru/author/otshelnik-fm/?tab=chat) с техзаданием на платную доработку.  

Полный список моих работ опубликован на [моём сайте](https://otshelnik-fm.ru/?p=2562&utm_source=free-addons&utm_medium=addon-description&utm_campaign=smilies-in-emoji&utm_content=github-com&utm_term=all-my-addons) и в каталоге магазина [CodeSeller.ru](https://codeseller.ru/author/otshelnik-fm/?tab=publics&subtab=type-products)  

------------------------------

## Author  

**Wladimir Druzhaev** (Otshelnik-Fm)  


